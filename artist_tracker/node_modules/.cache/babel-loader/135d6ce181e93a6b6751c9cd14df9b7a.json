{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n/** API Class.\n *\n * Static class connects methods used to get/send to to the API.\n * \n */\n\nclass ArtistTrackerApi {\n  // token for interaction with the API is stored here.\n  static async request(endpoint) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"get\";\n    console.debug(\"API Call:\", endpoint, data, method);\n    console.log('in request (api) token', this.token);\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = {\n      Authorization: `Bearer ${ArtistTrackerApi.token}`\n    };\n    const params = method === \"get\" ? data : {};\n\n    try {\n      return (await axios({\n        url,\n        method,\n        data,\n        params,\n        headers\n      })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      const message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  } // Individual API routes\n\n  /** Get details on a company by handle. */\n  //   static async getCompany(handle) {\n  //     try {\n  //       const res = await this.request(`companies/${handle}`);\n  //       return res.company;\n  //     } catch(err) {\n  //       console.log(err)\n  //     }\n  //   }\n  //   /** Get list of all companies */\n  //   static async getAllCompanies(name) {\n  //     try {\n  //       const query = name !== \"\" ? `/?name=${name}`:\"\";\n  //       const res = await this.request(`companies${query}`);\n  //       return res.companies;\n  //     } catch(err) {\n  //       console.log(err)\n  //     }\n  //   }\n  //   /** Get list of all jobs */\n  //   static async getAllJobs(title) {\n  //     try {\n  //       const query = title !== \"\" ? `/?title=${title}`:\"\";\n  //       const res = await this.request(`jobs${query}`);\n  //       return res.jobs;\n  //     } catch(err) {\n  //       console.log(err)\n  //     }\n  //   }\n\n  /** Get details on a user by username. */\n\n\n  static async getUser(id) {\n    try {\n      console.log('in getUser token', ArtistTrackerApi.token);\n      const res = await this.request(`users/${id}`);\n      return res.user;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  /** Update user profile. */\n\n\n  static async updateUser(id, username, password, firstName, email, city, distancePref) {\n    try {\n      const updateData = {\n        username,\n        password,\n        firstName,\n        email,\n        city,\n        distancePref\n      };\n      const res = await this.request(`users/${id}`, updateData, 'patch');\n      return res.user;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  /** Authenticate username/password and return token */\n\n\n  static async authenticateUser(username, password) {\n    try {\n      console.log('in authenticateUser token', this.token);\n      const res = await this.request('auth/token', {\n        username,\n        password\n      }, 'post');\n      ArtistTrackerApi.token = res.token;\n      return res.token;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  /** Register new user and return token */\n\n\n  static async registerUser(user) {\n    try {\n      const {\n        username,\n        password,\n        firstName,\n        email,\n        city,\n        distancePref\n      } = user;\n      const res = await this.request('auth/register', {\n        username,\n        password,\n        firstName,\n        email,\n        city,\n        distancePref\n      }, 'post');\n      ArtistTrackerApi.token = res.token;\n      console.log('in registerUser token', ArtistTrackerApi.token);\n      const newUser = {\n        id: res.newUser.id,\n        username: res.newUser.username,\n        firstName: res.newUser.firstName,\n        email: res.newUser.email,\n        city: res.newUser.city,\n        distance: res.newUser.distancePref\n      };\n      return {\n        token: res.token,\n        newUser\n      };\n    } catch (err) {\n      console.log(err);\n    }\n  } // /** Apply to job */\n  // static async applyToJob(username, id, token) {\n  //   try {\n  //     JoblyApi.token = token;\n  //     const res = await this.request(`users/${username}/jobs/${id}`, {}, 'post');\n  //     console.log(res)\n  //     return res;\n  //   } catch(err) {\n  //     console.log(err)\n  //   }\n  // }\n\n\n} // for now, put token (\"testuser\" / \"password\" on class)\n// JoblyApi.token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZ\" +\n//     \"SI6InRlc3R1c2VyIiwiaXNBZG1pbiI6ZmFsc2UsImlhdCI6MTU5ODE1OTI1OX0.\" +\n//     \"FtrMwBQwe6Ue-glIFgz_Nf8XxRT2YecFCiSpYL0fCXc\";\n\n\nexport default ArtistTrackerApi;","map":{"version":3,"sources":["/home/ells/Bootcamp/Capstone-2/frontend/artist_tracker/src/api.js"],"names":["axios","BASE_URL","process","env","REACT_APP_BASE_URL","ArtistTrackerApi","request","endpoint","data","method","console","debug","log","token","url","headers","Authorization","params","err","error","response","message","Array","isArray","getUser","id","res","user","updateUser","username","password","firstName","email","city","distancePref","updateData","authenticateUser","registerUser","newUser","distance"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:3001\";\n\n/** API Class.\n *\n * Static class connects methods used to get/send to to the API.\n * \n */\n\nclass ArtistTrackerApi {\n  // token for interaction with the API is stored here.\n  static token;\n\n  static async request(endpoint, data = {}, method = \"get\") {\n    console.debug(\"API Call:\", endpoint, data, method);\n    console.log('in request (api) token', this.token)\n    const url = `${BASE_URL}/${endpoint}`;\n    const headers = { Authorization: `Bearer ${ArtistTrackerApi.token}` };\n    const params = (method === \"get\") ? data : {};\n    try {\n      return (await axios({ url, method, data, params, headers })).data;\n    } catch (err) {\n      console.error(\"API Error:\", err.response);\n      const message = err.response.data.error.message;\n      throw Array.isArray(message) ? message : [message];\n    }\n  }\n\n  // Individual API routes\n\n  /** Get details on a company by handle. */\n\n//   static async getCompany(handle) {\n//     try {\n//       const res = await this.request(`companies/${handle}`);\n//       return res.company;\n//     } catch(err) {\n//       console.log(err)\n//     }\n//   }\n\n//   /** Get list of all companies */\n\n//   static async getAllCompanies(name) {\n//     try {\n//       const query = name !== \"\" ? `/?name=${name}`:\"\";\n//       const res = await this.request(`companies${query}`);\n//       return res.companies;\n//     } catch(err) {\n//       console.log(err)\n//     }\n//   }\n\n//   /** Get list of all jobs */\n  \n//   static async getAllJobs(title) {\n//     try {\n//       const query = title !== \"\" ? `/?title=${title}`:\"\";\n//       const res = await this.request(`jobs${query}`);\n//       return res.jobs;\n//     } catch(err) {\n//       console.log(err)\n//     }\n//   }\n\n    /** Get details on a user by username. */\n\n    static async getUser(id) {\n      try {\n        console.log('in getUser token', ArtistTrackerApi.token)\n        const res = await this.request(`users/${id}`);\n        return res.user;\n      } catch(err) {\n        console.log(err)\n      }\n    }\n\n    /** Update user profile. */\n\n    static async updateUser(id, username, password, firstName, email, \n        city, distancePref) {\n      try {\n        const updateData = {username, password, firstName, email, city, distancePref}\n        const res = await this.request(`users/${id}`, \n                    updateData, 'patch');\n        return res.user;\n      } catch(err) {\n        console.log(err)\n      }\n    }\n\n    /** Authenticate username/password and return token */\n\n    static async authenticateUser(username, password) {\n      try {\n        console.log('in authenticateUser token', this.token)\n        const res = await this.request('auth/token', {username, password}, 'post');\n        ArtistTrackerApi.token = res.token;\n        return res.token;\n      } catch(err) {\n        console.log(err)\n      }\n    }\n\n    /** Register new user and return token */\n\n    static async registerUser(user) {\n      try {\n        const {username, password, firstName, email, city, distancePref} = user;\n        const res = await this.request('auth/register', \n                            {username, password, firstName, email, city, distancePref}, 'post');\n        ArtistTrackerApi.token = res.token;\n        console.log('in registerUser token', ArtistTrackerApi.token)\n        const newUser = {id:res.newUser.id, username:res.newUser.username,\n            firstName: res.newUser.firstName, email: res.newUser.email, \n            city: res.newUser.city, distance: res.newUser.distancePref}\n        return {token: res.token, newUser};\n      } catch(err) {\n        console.log(err)\n      }\n    }\n\n    // /** Apply to job */\n\n    // static async applyToJob(username, id, token) {\n    //   try {\n    //     JoblyApi.token = token;\n    //     const res = await this.request(`users/${username}/jobs/${id}`, {}, 'post');\n    //     console.log(res)\n    //     return res;\n    //   } catch(err) {\n    //     console.log(err)\n    //   }\n    // }\n\n}\n\n// for now, put token (\"testuser\" / \"password\" on class)\n// JoblyApi.token = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZ\" +\n//     \"SI6InRlc3R1c2VyIiwiaXNBZG1pbiI6ZmFsc2UsImlhdCI6MTU5ODE1OTI1OX0.\" +\n//     \"FtrMwBQwe6Ue-glIFgz_Nf8XxRT2YecFCiSpYL0fCXc\";\n\nexport default ArtistTrackerApi;"]},"metadata":{},"sourceType":"module"}